plugins {
    id 'java-library'
}

repositories {
    mavenLocal()
    maven {
      url = 'https://maven.aliyun.com/repository/public'
    }
}
ext{
    junitVersion='5.7.2'
}


group = 'com.github.tomalloc.jhlabs'
version = '1.0.0-SNAPSHOT'



tasks.named('jar') {
    manifest {
        attributes('Automatic-Module-Name': 'org.jhlabs.image.filter',
            'Implementation-Version': project.version)
    }
}



tasks.withType(JavaCompile) {
    options.warnings = true
    options.encoding = 'UTF-8'
    options.compilerArgs += ['-parameters', '-Xdoclint:none', '-Xlint:none', '-nowarn']
}
java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11

    withSourcesJar()
    // withJavadocJar()
}
dependencies {
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${junitVersion}"
    testImplementation "org.junit.jupiter:junit-jupiter-api:${junitVersion}"
    testRuntimeOnly "org.junit.platform:junit-platform-launcher:${junitVersion}"
}


test {
    useJUnitPlatform()

    failFast = true

    testLogging {
      events "passed", "skipped", "failed"
    }
}
